<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>اختيار المشن</title>
  <style>
    body { font-family: sans-serif; padding: 1rem; line-height: 1.5 }
    select, a.button { font-size: 1rem; padding: 0.5rem; margin: 0.5rem 0 }
    pre { background: #f5f5f5; border: 1px solid #ddd; padding: 1rem; overflow-x: auto }
    a.button { display: inline-block; background: #4285F4; color: #fff; text-decoration: none; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>اختار المشن</h1>

  <select id="mission-select">
    <option value="">-- اختر مهمة --</option>
    <option value="mission1.ipynb">مهمة 1</option>
    <option value="mission2.ipynb">مهمة 2</option>
    <option value="mission3.ipynb">مهمة 3</option>
    <option value="mission4.ipynb">مهمة 4</option>
    <option value="mission5.ipynb">مهمة 5</option>
    <option value="mission6.ipynb">مهمة 6</option>
    <option value="mission7.ipynb">مهمة 7</option>
  </select>

  <div>
    <a id="open-colab" class="button" href="#" target="_blank" style="display:none">
      افتح في Colab
    </a>
  </div>

  <div id="code-display"></div>

  <script>
    const rawBase   = 'https://raw.githubusercontent.com/khaledahmed6526/my-exam-models/main/';
    const colabBase = 'https://colab.research.google.com/github/khaledahmed6526/my-exam-models/blob/main/';

    const select = document.getElementById('mission-select');
    const codeDiv  = document.getElementById('code-display');
    const colabBtn = document.getElementById('open-colab');

    select.addEventListener('change', async () => {
      const file = select.value;
      codeDiv.innerHTML = '';
      colabBtn.style.display = 'none';

      if (!file) return;

      try {
        const res = await fetch(rawBase + file);
        const nb  = await res.json();
        nb.cells
          .filter(c => c.cell_type === 'code')
          .forEach((cell, i) => {
            const pre = document.createElement('pre');
            pre.textContent = cell.source.join('');
            codeDiv.appendChild(pre);
          });
      } catch (e) {
        codeDiv.textContent = 'خطأ في تحميل الملف.';
        console.error(e);
      }

      colabBtn.href = colabBase + file;
      colabBtn.style.display = 'inline-block';
    });
  </script>
</body>
</html>
